<!-- archivo √∫nico, autocontenido -->
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>FollowUP Reports ‚Äì Bienvenida (Palacio de Hierro ¬∑ Centro P1)</title>
  <meta name="description" content="Bienvenida a FollowUP Reports. Accesos directos a m√≥dulos y filtros activos." />
  <link rel="icon" href="https://media.licdn.com/dms/image/v2/D4E0BAQFvVz5clxj08w/company-logo_200_200/B4EZXyyjtSG0AI-/0/1743535094994/followupcx_logo?e=2147483647&v=beta&t=FVh7RUdEGOzXdcCx5TXmlVWeh3MfenVzm9HDifB-B0k" type="image/png">

  <style>
    :root{
      --brand:#0f6eea; --brand-600:#0a55b6;
      --ink:#0f172a; --muted:#637488;
      --ok:#16a34a; --warn:#ef4444;
      --bg:#f5f7fb; --card:#ffffff; --chip:#e6eefc;
      --radius:14px; --shadow:0 6px 24px rgba(15,23,42,.06);
      --sidebar-w: 264px; --sidebar-mini: 64px; --topbar-h: 56px;
      --nav-item-h: 38px; --nav-pad: 12px; --divider: #e5e7eb;
      --primary-50:#eef5ff; --primary-600:#0b5f80; --primary-700:#0a516d; --focus: #93c5fd;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial; color:var(--ink); background:var(--bg); display:flex; }

    /* ===== Shell & layout ===== */
    body.sb-mini .shell{ margin-left: var(--sidebar-mini); }
    body.sb-wide .shell{ margin-left: var(--sidebar-w); }
    .shell{display:flex; width:100%; min-height:100svh; overflow:hidden; transition:margin-left .2s ease;}
    .main{flex:1; display:flex; flex-direction:column; min-width:0;}
    .page{ flex:1; overflow:auto; overflow-x:hidden; padding:18px; position:relative; min-width:0; padding-left:max(14px, env(safe-area-inset-left)); padding-right:max(14px, env(safe-area-inset-right)); }

    /* ===== Topbar (m√≥vil) ===== */
    .topbar{
      display:none; position:sticky; top:0; z-index:60; height:var(--topbar-h);
      background:#fff; color:#0b2238; padding:0 12px; align-items:center; gap:8px; border-bottom:1px solid #eaeff5;
    }
    .topbar h1{font-size:16px; margin:0; font-weight:800}
    .hamb{appearance:none;border:0;background:transparent;color:#0b2238;font-size:22px;line-height:1; padding:8px 10px; border-radius:10px; cursor:pointer}
    .hamb:active{transform:scale(.98)}

    /* ===== Sidebar (compacto + fullscreen m√≥vil) ===== */
    .sidebar{
      width:var(--sidebar-w); min-width:var(--sidebar-w);
      background:#fff; color:var(--ink); padding:0; display:flex; flex-direction:column;
      border-right:1px solid var(--divider);
      position:fixed; inset:0 auto 0 0; z-index:70;
      transform:translateX(0); transition:transform .25s ease, width .2s ease, min-width .2s ease;
    }
    .sidebar.mini{ width:var(--sidebar-mini); min-width:var(--sidebar-mini);}
    .sidebar.mini.hovering{ width:var(--sidebar-w); min-width:var(--sidebar-w); }
    .sidebar .brand{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px var(--nav-pad); height:var(--topbar-h); border-bottom:1px solid var(--divider); }
    .brand .logo{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px}
    .brand .logo svg{width:32px; height:32px}

    .nav{padding:10px; display:flex; flex-direction:column; gap:6px; overflow:auto}
    .nav ul{list-style:none; margin:0; padding:0}
    .nav .item{ display:flex; align-items:center; gap:8px; height:var(--nav-item-h); padding:0 6px; border-radius:10px; cursor:pointer; text-decoration:none; color:#0f172a; transition:background-color .15s ease, color .15s ease; }
    .nav .item:hover{ background:#f8fafc }
    .nav .item[aria-current="page"], .nav .item.active{ background:var(--primary-600); color:#fff; }
    .nav .icon{width:38px; display:flex; align-items:center; justify-content:center; flex:0 0 38px; color:#0b2238}
    .nav .label{white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .mini .label{display:none}
    .mini.hovering .label{display:inline}
    .divider{border:0; border-top:1px solid var(--divider); margin:8px 0}

    /* Colapsables */
    .collapse .collapse-head{ display:flex; align-items:center; gap:8px; height:var(--nav-item-h); padding:0 6px; border-radius:10px; cursor:pointer; user-select:none; }
    .collapse .chev{margin-left:auto; transition:transform .15s ease}
    .collapse[aria-expanded="true"] .chev{transform:rotate(-90deg)}
    .collapse .panel{display:none; padding-left:6px}
    .collapse[aria-expanded="true"] .panel{display:block}
    .mini .collapse .chev, .mini .panel{display:none}
    .mini.hovering .collapse .chev{display:inline}

    /* Overlay m√≥vil */
    .overlay{ position:fixed; inset:0; background:rgba(0,0,0,.45); opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:60; }
    .overlay.visible{opacity:1; pointer-events:auto}

    /* ===== Cards / contenido ===== */
    .card{background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:16px; width:100%; max-width:100%}
    .card.title{display:flex; align-items:center; justify-content:space-between; padding:18px; gap:12px}
    .pill{background:#f1f5ff;border:1px solid #e3ecff;color:#173f82;border-radius:999px;padding:6px 10px;font-size:12px}
    .welcome{display:grid; gap:14px; grid-template-columns:repeat(12,1fr); width:100%}
    .span-12{grid-column:span 12}.span-8{grid-column:span 8}.span-6{grid-column:span 6}.span-4{grid-column:span 4}
    @media (max-width: 1200px){ .span-8,.span-6,.span-4{grid-column:span 12} }
    .cta-grid{ display:grid; gap:14px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); align-items:stretch; }
    .cta{ display:flex; flex-direction:column; gap:10px; padding:16px; border:1px solid #e7ecf7; border-radius:16px; text-decoration:none; color:inherit; transition:transform .12s ease, box-shadow .12s ease; }
    .cta:hover{ transform:translateY(-1px); box-shadow:0 10px 28px rgba(15,23,42,.08) }
    .cta h3{ margin:0; font-size:16px } .cta p{ margin:0; color:var(--muted); font-size:13px } .cta .go{ margin-top:auto; display:inline-flex; align-items:center; gap:8px; font-weight:700; color:#173f82 }

    .chips{display:flex; flex-wrap:wrap; gap:8px}
    .chip{background:var(--chip); color:#17438a; padding:6px 10px; border-radius:999px; font-size:12px; cursor:default}
    .btn{ appearance:none; border:1px solid #e7ecf7; background:#fff; color:#173f82; border-radius:10px; padding:10px 12px; cursor:pointer; min-height:40px; font-weight:600; }
    .btn:active{transform:scale(.98)}

    /* ===== Responsive ===== */
    @media (max-width: 900px){
      .topbar{display:flex}
      .shell{ margin-left:0; }
      /* Drawer m√≥vil ocupa el ancho completo (fullscreen) */
      .sidebar{ width:100vw; min-width:100vw; transform:translateX(-100%); }
      .sidebar.open{ transform:translateX(0) }
      .page{padding:14px}
      /* En m√≥vil no hay modo mini/hover */
      .sidebar.mini,.sidebar.mini.hovering{ width:100vw; min-width:100vw; }
      .mini .label{display:inline}
      .mini .collapse .chev{display:inline}
    }

    /* ===== Accesibilidad ===== */
    .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{left:8px;top:8px;width:auto;height:auto;background:#000;color:#fff;padding:8px;border-radius:8px;z-index:9999}
    .item:focus,.collapse-head:focus{outline:2px solid var(--focus); outline-offset:2px; border-radius:10px}
    @media (prefers-reduced-motion: reduce){ *{animation:none!important; transition:none!important} }
  </style>
</head>
<body class="sb-mini">
  <a class="skip-link" href="#contenido">Saltar al contenido</a>

  <div class="shell" id="shell">
    <!-- ===== Overlay m√≥vil ===== -->
    <div class="overlay" id="overlay" aria-hidden="true"></div>

    <!-- ===== Sidebar / Drawer ===== -->
    <aside class="sidebar mini" id="sidebar" role="dialog" aria-modal="true" aria-label="M√≥dulos">
      <div class="brand">
        <div class="logo" aria-label="FollowUP">
          <svg viewBox="0 0 48 48" aria-hidden="true">
            <defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#0f6eea"/><stop offset="1" stop-color="#0a55b6"/></linearGradient></defs>
            <circle cx="24" cy="24" r="20" fill="url(#g)"/>
            <path d="M14 26l6 6 14-14" stroke="#fff" stroke-width="3" fill="none" stroke-linecap="round"/>
          </svg>
          <strong class="label">FollowUP Reports</strong>
        </div>
      </div>

      <nav class="nav" id="nav">
        <ul>
          <li>
            <a class="item" id="lnk-bienvenida" href="https://home.fupbi.org/">
  <span class="icon" aria-hidden="true">üè†</span>
  <span class="label">Inicio</span>
</a>
          </li>

          <!-- Reportes (colapsable) -->
          <li class="collapse" id="grp-reportes" aria-expanded="true">
            <div class="collapse-head" role="button" tabindex="0" aria-controls="panel-reportes" aria-expanded="true">
              <span class="icon" aria-hidden="true">üìë</span>
              <span class="label">Reportes</span>
              <span class="chev" aria-hidden="true">‚ùÆ</span>
            </div>
            <div id="panel-reportes" class="panel" role="region" aria-label="Reportes">
              <ul>
                <li>
                  <a class="item" id="lnk-dashboard" href="Dashboard.html">
                    <span class="icon" aria-hidden="true">üìä</span>
                    <span class="label">Dashboard</span>
                  </a>
                </li>
                <li>
                  <a class="item" id="lnk-recorridos" href="Recorridos.html">
                    <span class="icon" aria-hidden="true">üó∫Ô∏è</span>
                    <span class="label">Recorridos</span>
                  </a>
                </li>
                <li>
                  <a class="item" id="lnk-buyer" href="Buyer.html">
                    <span class="icon" aria-hidden="true">üßë‚Äçü§ù‚Äçüßë</span>
                    <span class="label">Buyer Persona</span>
                  </a>
                </li>
                <li>
                  <a class="item" id="lnk-staff" href="Staff.html">
                    <span class="icon" aria-hidden="true">üë§</span>
                    <span class="label">Staff</span>
                  </a>
                </li>
                <li>
                  <a class="item" id="lnk-comercial" href="Comercial.html">
                    <span class="icon" aria-hidden="true">üìà</span>
                    <span class="label">Comercial</span>
                  </a>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- ===== Columna principal ===== -->
    <div class="main">
      <!-- Topbar m√≥vil -->
      <div class="topbar">
        <button class="hamb" id="openNav" aria-label="Abrir men√∫">‚ò∞</button>
        <h1 id="pageTitle">Bienvenida</h1>
      </div>

      <main class="page" id="contenido" role="main">
        <div class="card title" style="margin-bottom:16px;">
          <h2 style="margin:0">Bienvenido/a a FollowUP Reports</h2>
          <span class="pill">Tu espacio comercial</span>
        </div>

        <section class="welcome" aria-label="Resumen y accesos">
          <div>
            <div style="margin-top:px; display:flex; gap:8px; flex-wrap:wrap">
              
              
            </div>
          </div>

          <div class="card span-12" aria-label="M√≥dulos">
            <h3 style="margin:0 0 12px">M√≥dulos</h3>
            <div class="cta-grid">
              <a id="cta-dashboard" class="cta" href="Dashboard.html">
                <h3>üìä Dashboard</h3>
                <p>Tr√°fico, permanencia, zonas e indicadores de conversi√≥n a Caja.</p>
                <span class="go">Abrir m√≥dulo ‚Üí</span>
              </a>
              <a id="cta-recorridos" class="cta" href="Recorridos.html">
                <h3>üó∫Ô∏è Recorridos</h3>
                <p>Flujos (Sankey), matriz de transiciones y rutas m√°s frecuentes.</p>
                <span class="go">Abrir m√≥dulo ‚Üí</span>
              </a>
              <a id="cta-buyer" class="cta" href="Buyer.html">
                <h3>üßë‚Äçü§ù‚Äçüßë Buyer Persona</h3>
                <p>Composici√≥n por tipo de grupo y comportamiento de visita.</p>
                <span class="go">Abrir m√≥dulo ‚Üí</span>
              </a>
              <a id="cta-staff" class="cta" href="Staff.html">
                <h3>üë§ Staff</h3>
                <p>Oportunidades con clientes y utilizaci√≥n del tiempo del staff.</p>
                <span class="go">Abrir m√≥dulo ‚Üí</span>
              </a>
              <a id="cta-comercial" class="cta" href="Comercial.html">
                <h3>üìà Comercial</h3>
                <p>Resumen de indicadores comerciales, venta y conversi√≥n.</p>
                <span class="go">Abrir m√≥dulo ‚Üí</span>
              </a>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script defer>
    (function(){
      const safe = fn => (...a)=>{ try{ return fn(...a);}catch(e){ console.error(e);} };

      // ===== Persistencia de filtros =====
      const DEFAULT_FILTERS = Object.freeze({ range:14, genero:'all', edad:'all', zona:'all', persona:'all', staffMode:'exclude' });
      const STORAGE_KEY = 'palacioFilters';
      const readQuery = ()=>{ const q=new URLSearchParams(location.search); const o={}; for (const [k,v] of q) o[k]=v; return o; };
      const serializeQuery = (f)=>{ const q=new URLSearchParams(); q.set('range', String(f.range));
        if (f.genero!=='all') q.set('genero', f.genero);
        if (f.edad!=='all') q.set('edad', f.edad);
        if (f.zona!=='all') q.set('zona', f.zona);
        if (f.persona!=='all') q.set('persona', f.persona);
        if (f.staffMode!=='exclude') q.set('staffMode', f.staffMode);
        return q.toString(); };
      function saveFilters(filters, updateURL){
        try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(filters)); }catch(e){ console.warn('No se pudo guardar en localStorage', e); }
        if (updateURL){ const qs=serializeQuery(filters); history.replaceState(null,'',location.pathname+(qs?'?'+qs:'')); }
      }
      function loadFilters(){
        const fromStorage = (()=>{ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)||'null'); }catch{ return null; }})();
        const fromQuery = readQuery();
        const merged = { ...DEFAULT_FILTERS, ...(fromStorage||{}) };
        if (fromQuery.range && [7,14,30].includes(+fromQuery.range)) merged.range = +fromQuery.range;
        if (fromQuery.genero && ['all','Femenino','Masculino'].includes(fromQuery.genero)) merged.genero = fromQuery.genero;
        if (fromQuery.edad && ['all','Ni√±o','Adulto Joven','Adulto','Senior'].includes(fromQuery.edad)) merged.edad = fromQuery.edad;
        if (fromQuery.zona) merged.zona = fromQuery.zona;
        if (fromQuery.persona && ['all','Solo','Pareja','Amigos','Familia'].includes(fromQuery.persona)) merged.persona = fromQuery.persona;
        if (fromQuery.staffMode && ['exclude','only'].includes(fromQuery.staffMode)) merged.staffMode = fromQuery.staffMode;
        saveFilters(merged, true);
        return merged;
      }
      const chipsFromFilters = (f)=>{ const chips=[`${f.range} d√≠as`];
        if (f.genero!=='all') chips.push(`G√©nero: ${f.genero}`);
        if (f.edad!=='all') chips.push(`Edad: ${f.edad}`);
        if (f.zona!=='all') chips.push(`Zona: ${f.zona}`);
        if (f.persona!=='all') chips.push(`Grupo: ${f.persona}`);
        if (f.staffMode==='only') chips.push('S√≥lo STAFF');
        return chips.length?chips:['Sin filtros']; };
      const buildHref = (base, filters)=>{ const qs=serializeQuery(filters); return base+(qs?'?'+qs:''); };

      // ===== Drawer / Sidebar =====
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('overlay');
      const openBtn = document.getElementById('openNav');
      const pageTitle = document.getElementById('pageTitle');
      const isMobile = ()=> window.matchMedia('(max-width:900px)').matches;

      function applyBodyOffset(){
        if (isMobile()) {
          document.body.classList.remove('sb-mini','sb-wide');
        } else {
          if (sidebar.classList.contains('mini') && !sidebar.classList.contains('hovering')) {
            document.body.classList.add('sb-mini'); document.body.classList.remove('sb-wide');
          } else {
            document.body.classList.add('sb-wide'); document.body.classList.remove('sb-mini');
          }
        }
      }
      applyBodyOffset();
      window.addEventListener('resize', safe(applyBodyOffset));

      function openSidebar(){ sidebar.classList.add('open'); overlay.classList.add('visible'); document.body.style.overflow='hidden'; }
      function closeSidebar(){ sidebar.classList.remove('open'); overlay.classList.remove('visible'); document.body.style.overflow=''; }

      ;['click','touchstart'].forEach(ev=>{
        openBtn?.addEventListener(ev, safe(openSidebar), {passive:true});
        overlay?.addEventListener(ev, safe(closeSidebar), {passive:true});
      });

      document.addEventListener('keydown', safe(e=>{
        if(e.key==='Escape' && isMobile() && overlay.classList.contains('visible')) closeSidebar();
      }));

      // Hover expand/collapse desktop
      sidebar.addEventListener('mouseenter', safe(()=>{ if(!isMobile() && sidebar.classList.contains('mini')){ sidebar.classList.add('hovering'); applyBodyOffset(); }}));
      sidebar.addEventListener('mouseleave', safe(()=>{ if(!isMobile()){ sidebar.classList.remove('hovering'); applyBodyOffset(); }}));

      // Collapse "Reportes"
      const reportes = document.getElementById('grp-reportes');
      const head = reportes.querySelector('.collapse-head');
      function setCollapse(open){ reportes.setAttribute('aria-expanded', String(open)); head.setAttribute('aria-expanded', String(open)); }
      head.addEventListener('click', safe(()=>{ if (sidebar.classList.contains('mini') && !sidebar.classList.contains('hovering') && !isMobile()) return; setCollapse(reportes.getAttribute('aria-expanded')!=='true'); }));
      head.addEventListener('keydown', safe(e=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); if (sidebar.classList.contains('mini') && !sidebar.classList.contains('hovering') && !isMobile()) return; setCollapse(reportes.getAttribute('aria-expanded')!=='true'); }}));

      // Active item + t√≠tulo
      (function markActive(){
        const path = location.pathname.split('/').pop() || 'Bienvenida.html';
        document.querySelectorAll('.nav a.item').forEach(a=>{
          a.removeAttribute('aria-current'); a.classList.remove('active');
          const file = (a.getAttribute('href')||'').split('?')[0].split('/').pop();
          if(file === path){ a.setAttribute('aria-current','page'); a.classList.add('active'); }
        });
        const current = document.querySelector('.nav a.item[aria-current="page"] .label');
        if (current && pageTitle){ pageTitle.textContent = current.textContent.trim(); }
      })();

      // Boot filtros + enlaces
      window.addEventListener('DOMContentLoaded', safe(()=>{
        const filters = loadFilters();
        const chipsEl = document.getElementById('chips-filtros');
        chipsEl.innerHTML = chipsFromFilters(filters).map(t=>`<span class="chip">${t}</span>`).join(' ');
        const linkMap = [
          ['lnk-dashboard','Dashboard.html'],
          ['lnk-recorridos','Recorridos.html'],
          ['lnk-buyer','Buyer.html'],
          ['lnk-staff','Staff.html'],
          ['lnk-comercial','Comercial.html'],
          ['cta-dashboard','Dashboard.html'],
          ['cta-recorridos','Recorridos.html'],
          ['cta-buyer','Buyer.html'],
          ['cta-staff','Staff.html'],
        ];
        linkMap.forEach(([id, base])=>{ const a=document.getElementById(id); if (a) a.setAttribute('href', buildHref(base, filters)); });

        document.getElementById('btn-reset').addEventListener('click', safe(()=>{
          const fresh = {...DEFAULT_FILTERS}; saveFilters(fresh, true);
          chipsEl.innerHTML = chipsFromFilters(fresh).map(t=>`<span class="chip">${t}</span>`).join(' ');
          linkMap.forEach(([id, base])=>{ const a=document.getElementById(id); if (a) a.setAttribute('href', buildHref(base, fresh)); });
        }));
        document.getElementById('btn-toggle-staff').addEventListener('click', safe(()=>{
          const next = {...JSON.parse(localStorage.getItem(STORAGE_KEY)||'{}'), ...DEFAULT_FILTERS};
          next.staffMode = (next.staffMode === 'only') ? 'exclude' : 'only'; saveFilters(next, true);
          chipsEl.innerHTML = chipsFromFilters(next).map(t=>`<span class="chip">${t}</span>`).join(' ');
          linkMap.forEach(([id, base])=>{ const a=document.getElementById(id); if (a) a.setAttribute('href', buildHref(base, next)); });
        }));
      }));

      // Click fuera (m√≥vil)
      document.addEventListener('click', safe((e)=>{
        if (!isMobile()) return;
        if (overlay.classList.contains('visible') && !sidebar.contains(e.target) && e.target!==openBtn && !openBtn.contains?.(e.target)) closeSidebar();
      }), {passive:true});
    })();
  </script>
</body>
</html>
